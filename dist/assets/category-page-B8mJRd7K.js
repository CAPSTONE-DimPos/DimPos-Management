import{c as l,j as e,E as y,G as f,H as _,I as F,J as E,K as V,L as v,M as x,N as p,O as j,Q as B,S as q}from"./index-C5LFqVy6.js";import{C as w,E as z,a as O,b as $,S as K,T as H,u as C,c as L,D as R}from"./use-query-params-Dxm1M_tz.js";import{B as m}from"./scroll-area-B7PKW6Ur.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Q=l("arrow-down",G);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],X=l("arrow-up-down",U);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],J=l("arrow-up",Y);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],W=l("folder-open",Z);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],se=l("folder",ee),M=({column:s,children:a})=>{const t=s.getIsSorted();return e.jsxs(y,{variant:"ghost",onClick:()=>s.toggleSorting(t==="asc"),className:"hover:bg-muted/50 -ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{className:"font-semibold",children:a}),t==="asc"?e.jsx(J,{className:"ml-2 h-4 w-4"}):t==="desc"?e.jsx(Q,{className:"ml-2 h-4 w-4"}):e.jsx(X,{className:"ml-2 h-4 w-4 opacity-50"})]})},ae=[{accessorKey:"displayOrder",header:()=>e.jsx("div",{className:"text-center font-semibold text-muted-foreground",children:"STT"}),cell:s=>e.jsx("div",{className:"text-center",children:e.jsx(m,{variant:"outline",className:"font-mono text-xs",children:Number(s.row.id)+1})}),size:120},{accessorKey:"name",header:({column:s})=>e.jsx(M,{column:s,children:"Tên Danh Mục"}),cell:s=>{const a=s.getValue();return e.jsx("div",{className:"max-w-[250px]",children:e.jsx("div",{className:"font-medium text-foreground truncate cursor-pointer hover:text-primary transition-colors",title:a,children:a})})}},{accessorKey:"code",header:({column:s})=>e.jsx(M,{column:s,children:"Mã Danh Mục"}),cell:s=>{const a=s.getValue();return e.jsxs("div",{className:"flex items-center gap-2 max-w-[180px]",children:[e.jsx(m,{variant:"secondary",className:"font-mono text-xs truncate",children:a}),e.jsx(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted flex-shrink-0",onClick:()=>f(a,"Mã danh mục"),title:"Sao chép mã danh mục",children:e.jsx(w,{className:"h-3 w-3"})})]})}},{accessorKey:"type",header:()=>e.jsx("div",{className:"font-semibold",children:"Loại Danh Mục"}),cell:s=>{const t=s.getValue()===1;return e.jsx("div",{className:"flex justify-start",children:e.jsx(m,{variant:"secondary",className:`flex items-center gap-1.5 ${t?"bg-purple-100 text-purple-800 hover:bg-purple-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-3 w-3"}),"Danh mục cha"]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-3 w-3"}),"Danh mục con"]})})})}},{accessorKey:"status",header:()=>e.jsx("div",{className:"text-center font-semibold",children:"Trạng Thái"}),cell:s=>{const t=s.getValue()===0;return e.jsx("div",{className:"flex justify-center",children:e.jsxs(m,{variant:t?"default":"secondary",className:`flex items-center gap-1.5 ${t?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t?"bg-green-500":"bg-gray-400"}`}),t?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-3 w-3"}),"Hiển thị"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-3 w-3"}),"Ẩn"]})]})})}},{id:"actions",header:()=>e.jsx("div",{className:"text-center font-semibold",children:"Thao Tác"}),cell:({row:s})=>{const a=s.original;return e.jsx("div",{className:"flex justify-center",children:e.jsxs(_,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(y,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-muted",title:"Xem thêm thao tác",children:[e.jsx("span",{className:"sr-only",children:"Mở menu thao tác"}),e.jsx($,{className:"h-4 w-4"})]})}),e.jsxs(E,{align:"end",className:"w-48",children:[e.jsxs(V,{className:"text-xs text-muted-foreground",children:['Thao tác cho "',a.name,'"']}),e.jsx(v,{}),e.jsxs(x,{className:"cursor-pointer hover:bg-blue-50 focus:bg-blue-50",onClick:()=>{console.log("Edit category:",a.id)},children:[e.jsx(K,{className:"mr-2 h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-blue-700",children:"Chỉnh sửa"})]}),e.jsxs(x,{className:"cursor-pointer hover:bg-gray-50 focus:bg-gray-50",onClick:()=>f(a.code,"Mã danh mục"),children:[e.jsx(w,{className:"mr-2 h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Sao chép mã"})]}),e.jsx(v,{}),e.jsxs(x,{className:"cursor-pointer hover:bg-red-50 focus:bg-red-50",onClick:()=>{console.log("Delete category:",a.id)},children:[e.jsx(H,{className:"mr-2 h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-red-700",children:"Xóa danh mục"})]})]})]})})},size:80}],te=async s=>await p.catalog.get(j.CATEGORY_API,{params:s}),re=async s=>await p.catalog.get(`${j.CATEGORY_API}/${s}`),oe=async s=>await p.catalog.post(j.CATEGORY_API,s),u={getCategories:te,getCategoryById:re,createCategory:oe},ne=()=>({getCategories:(r={})=>{const{page:i=r.page||1,size:d=r.size||10,sortBy:h=r.sortBy||"displayOrder",isAsc:c=r.isAsc||!0,name:g=r.name||""}=r;return C({queryKey:["categories",{page:i,size:d,sortBy:h,isAsc:c,name:g}],queryFn:()=>u.getCategories({page:i,size:d,sortBy:h,isAsc:c,name:g})})},getCategoryById:r=>C({queryKey:["category",r],queryFn:()=>u.getCategoryById(r)}),createCategory:r=>B({mutationFn:()=>u.createCategory(r)})}),ce=()=>{var b;const{currentPage:s,pageSize:a,sortBy:t,isAsc:r,setSort:i,setPage:d,setPageSize:h,filter:c,setFilter:g}=L({defaultSortBy:"displayOrder",defaultFilter:[{id:"name",value:""}]}),{getCategories:k}=ne(),{data:n,isLoading:T,isError:A,error:N}=k({size:a,page:s,sortBy:t,isAsc:r,name:((b=c.find(o=>o.id==="name"))==null?void 0:b.value)||""});A&&N&&q(N);const S=(n==null?void 0:n.data.data.items)||[],D=(n==null?void 0:n.data.data.total)||0,I=c.map(o=>({...o,searchPlaceholder:o.id==="name"?"Tìm kiếm theo tên danh mục":""})),P={id:t,desc:!r};return e.jsx(R,{columns:ae,data:S,totalItems:D,currentPage:s,pageSize:a,onPageChange:d,onPageSizeChange:h,isLoading:T,onSearchChange:g,searchValues:I,sortValues:[P],onSortChange:o=>{i(o[0].id,!o[0].desc)}})},he=()=>e.jsx("div",{className:"p-4",children:e.jsx(ce,{})});export{he as default};
